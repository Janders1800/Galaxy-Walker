<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Galaxy Walker Demo</title>
        <link rel="icon" href="./favicon.ico" />
        <link rel="stylesheet" href="./styles.css" />

        <!-- Import map so Three.js example modules (GLTFLoader, etc.) can use bare specifiers like "three". -->
        <script type="importmap">
            {
                "imports": {
                    "three": "./vendor/three/build/three.module.js",
                    "three/addons/": "./vendor/three/examples/jsm/"
                }
            }
        </script>
    </head>
    <body class="prestart">
        <div id="hud">
            <div id="hudStats">
                <div id="msg"></div>
                <button id="hudOptionsBtn" class="hudBtn" type="button">
                    Options
                </button>
            </div>
        </div>
        <div id="chargeUI"></div>
        <div id="fps">FPS: --</div>

        <!-- MassiveEngine splash (fade in/out, then main menu) -->
        <div id="splashOverlay">
            <img
                id="splashLogo"
                src="assets/MassiveEngine.png"
                alt="MassiveEngine"
                onerror="
                    document
                        .getElementById('splashOverlay')
                        ?.classList.add('off');
                    document
                        .getElementById('mainMenu')
                        ?.classList.remove('off');
                    this.remove();
                "
            />
        </div>

        <!-- Main menu overlay -->
        <div id="mainMenu" class="off">
            <div class="menuHud">
                <div class="menuPanel" id="menuPanel">
                    <div class="brand">
                        <img
                            class="gwLogo"
                            src="assets/galaxy-walker-logo.svg"
                            alt="Galaxy Walker"
                            onerror="
                                document.getElementById(
                                    'logoFallback',
                                ).style.display = 'block';
                                this.style.display = 'none';
                            "
                        />
                        <div
                            id="logoFallback"
                            class="tagline"
                            style="display: none"
                        >
                            Galaxy Walker
                        </div>
                        <div class="tagline">
                            Explore procedural worlds. Take off. Warp between
                            star systems.
                        </div>
                    </div>

                    <div class="menuButtons">
                        <button id="startBtn" class="menuBtn primary">
                            Begin
                        </button>
                        <button id="optionsBtn" class="menuBtn">Options</button>
                        <button id="extrasBtn" class="menuBtn">Controls</button>
                    </div>

                    <div
                        class="menuOptions"
                        id="menuOptions"
                        aria-label="Options"
                    >
                        <div class="fieldRow">
                            <label for="qualitySelect">Quality</label>
                            <select id="qualitySelect">
                                <option value="Potato">Potato</option>
                                <option value="Laptop">Laptop</option>
                                <option value="Descktop">Desktop</option>
                                <option value="GamingPC">Gaming PC</option>
                                <option value="NASA">NASA</option>
                            </select>
                        </div>

                        <div class="fieldRow">
                            <label for="seedInput">Seed</label>
                            <input
                                id="seedInput"
                                type="text"
                                placeholder="(random)"
                                autocomplete="off"
                                spellcheck="false"
                            />
                        </div>

                        <div class="fieldRow">
                            <label>Sound</label>
                            <button
                                id="soundToggleBtn"
                                class="togglePill"
                                type="button"
                                aria-pressed="false"
                            >
                                On
                            </button>
                        </div>

                        <div class="fieldRow">
                            <label>Controls</label>
                            <button
                                id="controlsBtn"
                                class="togglePill"
                                type="button"
                            >
                                View
                            </button>
                        </div>

                        <button
                            id="optionsBackBtn"
                            class="menuBtn backBtn"
                            type="button"
                        >
                            Back
                        </button>
                    </div>

                    <div style="flex: 1"></div>
                    <div class="menuHint">Press <b>Enter</b> to Begin</div>
                </div>

                <div class="menuBand" aria-hidden="true"></div>

                <div class="hudDecor" aria-hidden="true">
                    <div class="hudDots">
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                        <i></i>
                    </div>
                    <div class="hudArc"></div>
                </div>
            </div>
        </div>

        <!-- Loading overlay (shown after Begin) -->
        <div id="loadingOverlay" class="off" aria-live="polite">
            <div class="txt">Loading...</div>
        </div>

        <!-- Controls modal (2 columns) -->
        <div
            id="controlsOverlay"
            class="off"
            role="dialog"
            aria-modal="true"
            aria-labelledby="controlsTitle"
        >
            <div class="panel">
                <div class="topbar">
                    <h2 id="controlsTitle">Controls</h2>
                    <button id="controlsClose" aria-label="Close">✕</button>
                </div>
                <div class="cols">
                    <div class="col">
                        <h3>Keyboard + Mouse</h3>
                        <ul>
                            <li><b>Click</b> — pointer lock</li>
                            <li><b>Mouse</b> — look</li>
                            <li><b>WASD</b> — move (walk/fly)</li>
                            <li><b>Shift</b> — boost/sprint</li>
                            <li><b>Space</b> — jump / up thrust</li>
                            <li><b>Ctrl</b> — down thrust (fly)</li>
                            <li><b>Q / E</b> — roll (fly)</li>
                            <li><b>F</b> — take off</li>
                            <li><b>L</b> — land nearest</li>
                            <li><b>R</b> — respawn</li>
                            <li><b>M</b> — toggle mini map</li>
                            <li><b>+</b> / <b>-</b> — zoom mini map</li>
                            <li><b>G</b> — galaxy map</li>
                            <li><b>P</b> — toggle sun lights</li>
                            <li><b>Esc</b> — close galaxy map</li>
                        </ul>
                    </div>
                    <div class="col">
                        <h3>Gamepad</h3>
                        <ul>
                            <li><b>Left stick</b> — move (walk/fly)</li>
                            <li><b>Right stick</b> — look</li>
                            <li><b>A</b> — jump (walk)</li>
                            <li><b>LB / RB</b> — roll (fly)</li>
                            <li>
                                <b>LS</b> (press left stick) — boost (fly) /
                                sprint (walk)
                            </li>
                            <li><b>LT / RT</b> — down / up thrust (fly)</li>
                        </ul>
                        <div
                            style="
                                opacity: 0.75;
                                font-size: 12px;
                                margin-top: 8px;
                            "
                        >
                            Note: some UI toggles are keyboard-only for now (map
                            / warp UI).
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="crosshair"></div>
        <canvas id="galaxyMap"></canvas>

        <div id="galaxyOverlay" class="off">
            <canvas id="galaxyFull"></canvas>
            <div id="galaxyOverlayHud">
                <b>GALAXY MAP</b> — Drag: pan • Wheel: zoom • Click: select •
                Double-click: warp • Enter: center on player • Esc/G: close
            </div>
        </div>

        <script type="module" src="./src/main.js"></script>
    </body>
</html>
